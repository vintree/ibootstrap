/** m.tv.sohu.com, time 20150922 20:25:08, sohu inc */
!function(window,undefined){function getStringLen(a){var b=a.match(/[^\x00-\xff]/gi);return a.length+(null==b?0:b.length)}function getBrowserType(){return window.ActiveXObject?window.XMLHttpRequest&&!window.XDomainRequest?5:window.XDomainRequest?6:1:navigator.userAgent.toLowerCase().indexOf("firefox")>=0?2:"object"==typeof window.opera?3:window.MessageEvent&&!document.getBoxObjectFor?7:navigator.appVersion.indexOf("Safari")>=0?4:void 0}function GetXmlHttpObject(){var a=null;try{a=new XMLHttpRequest}catch(b){try{a=new ActiveXObject("Msxml2.XMLHTTP")}catch(b){a=new ActiveXObject("Microsoft.XMLHTTP")}}return a}function parseUrl(a){var b={},c=unescape(a).split("?").length>=2?unescape(a).split("?")[1]:"";if(0===c.length)return b;for(var d,e,f=c.split("&"),g=0,h=f.length;h>g;g++)d=f[g].split("=")[0],e=2==f[g].split("=").length?f[g].split("=")[1]:"",b[d]="undefined"==typeof b[d]?e:"string"==typeof b[d]?[].concat(b[d]).concat(e):b[d].concat(e);return b}function checkCookieEnabled(){try{if(navigator.cookieEnabled===!1)return!1;var a=new Date,b="testCookie=yes;expires="+new Date(a.getTime()+5e3).toGMTString()+";";if(document.cookie=b,!document.cookie)return!1;b="testCookie=yes;expires="+new Date(a.getTime()-5e3).toGMTString()+";",document.cookie=b}catch(c){return!1}return!0}if(window.PassportSC)return alert("全局变量PassportSC已被占用！"),!1;window.passportSetGlobalName=function(a,b){return window[a]?(alert("全局变量"+a+"已被占用！"),!1):(window[a]=window.PassportSC,void(b&&(window.PassportSC=null,delete window.PassportSC)))},Function.prototype.bindFunc=function(a){if("object"!=typeof a)return!1;var b=this;return function(){return b.apply(a,arguments)}},document.getElementsByClassName||(document.getElementsByClassName=function(a,b){if(!a)return[];for(var c,d=(b||document).getElementsByTagName("*"),e=[],f=0,g=d.length;g>f&&(c=d[f].getAttribute("class")?d[f].getAttribute("class").split(" "):[],0!==c.length);f++)for(var h=0,i=c.length;i>h;h++)if(c[h]===a){e.push(d[f]);break}return e});var Base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(a){var b,c,d,e,f,g,h,i="",j=0;for(a=this.encodeURL(a),a=Base64._utf8_encode(a);j<a.length;)b=a.charCodeAt(j++),c=a.charCodeAt(j++),d=a.charCodeAt(j++),e=b>>2,f=(3&b)<<4|c>>4,g=(15&c)<<2|d>>6,h=63&d,isNaN(c)?g=h=64:isNaN(d)&&(h=64),i=i+this._keyStr.charAt(e)+this._keyStr.charAt(f)+this._keyStr.charAt(g)+this._keyStr.charAt(h);return i},decode:function(a){var b,c,d,e,f,g,h,i="",j=0;for(a=this.decodeUrl(a),a=a.replace(/[^A-Za-z0-9\+\/\=]/g,"");j<a.length;)e=this._keyStr.indexOf(a.charAt(j++)),f=this._keyStr.indexOf(a.charAt(j++)),g=this._keyStr.indexOf(a.charAt(j++)),h=this._keyStr.indexOf(a.charAt(j++)),b=e<<2|f>>4,c=(15&f)<<4|g>>2,d=(3&g)<<6|h,i+=String.fromCharCode(b),64!=g&&(i+=String.fromCharCode(c)),64!=h&&(i+=String.fromCharCode(d));return i=Base64._utf8_decode(i)},_utf8_encode:function(a){a=a.replace(/\r\n/g,"\n");for(var b="",c=0;c<a.length;c++){var d=a.charCodeAt(c);128>d?b+=String.fromCharCode(d):d>127&&2048>d?(b+=String.fromCharCode(d>>6|192),b+=String.fromCharCode(63&d|128)):(b+=String.fromCharCode(d>>12|224),b+=String.fromCharCode(d>>6&63|128),b+=String.fromCharCode(63&d|128))}return b},_utf8_decode:function(a){for(var b="",c=0,d=0,e=0;c<a.length;)d=a.charCodeAt(c),128>d?(b+=String.fromCharCode(d),c++):d>191&&224>d?(e=a.charCodeAt(c+1),b+=String.fromCharCode((31&d)<<6|63&e),c+=2):(e=a.charCodeAt(c+1),c3=a.charCodeAt(c+2),b+=String.fromCharCode((15&d)<<12|(63&e)<<6|63&c3),c+=3);return b},encodeURL:function(a){return a.replace(/\+/g,"-").replace(/\//g,"_").replace(/\=+$/,"")},decodeUrl:function(a){var b,c;return a.length%4===0?b=a:(c=a.length%4,b=(a+"===").slice(0,a.length+4-c)),b.replace(/-/g,"+").replace(/_/g,"/")}},MD5=function(a){function b(a){return l(c(k(a),a.length*n))}function c(a,b){a[b>>5]|=128<<b%32,a[(b+64>>>9<<4)+14]=b;for(var c=1732584193,d=-271733879,j=-1732584194,k=271733878,l=0;l<a.length;l+=16){var m=c,n=d,o=j,p=k;c=e(c,d,j,k,a[l+0],7,-680876936),k=e(k,c,d,j,a[l+1],12,-389564586),j=e(j,k,c,d,a[l+2],17,606105819),d=e(d,j,k,c,a[l+3],22,-1044525330),c=e(c,d,j,k,a[l+4],7,-176418897),k=e(k,c,d,j,a[l+5],12,1200080426),j=e(j,k,c,d,a[l+6],17,-1473231341),d=e(d,j,k,c,a[l+7],22,-45705983),c=e(c,d,j,k,a[l+8],7,1770035416),k=e(k,c,d,j,a[l+9],12,-1958414417),j=e(j,k,c,d,a[l+10],17,-42063),d=e(d,j,k,c,a[l+11],22,-1990404162),c=e(c,d,j,k,a[l+12],7,1804603682),k=e(k,c,d,j,a[l+13],12,-40341101),j=e(j,k,c,d,a[l+14],17,-1502002290),d=e(d,j,k,c,a[l+15],22,1236535329),c=f(c,d,j,k,a[l+1],5,-165796510),k=f(k,c,d,j,a[l+6],9,-1069501632),j=f(j,k,c,d,a[l+11],14,643717713),d=f(d,j,k,c,a[l+0],20,-373897302),c=f(c,d,j,k,a[l+5],5,-701558691),k=f(k,c,d,j,a[l+10],9,38016083),j=f(j,k,c,d,a[l+15],14,-660478335),d=f(d,j,k,c,a[l+4],20,-405537848),c=f(c,d,j,k,a[l+9],5,568446438),k=f(k,c,d,j,a[l+14],9,-1019803690),j=f(j,k,c,d,a[l+3],14,-187363961),d=f(d,j,k,c,a[l+8],20,1163531501),c=f(c,d,j,k,a[l+13],5,-1444681467),k=f(k,c,d,j,a[l+2],9,-51403784),j=f(j,k,c,d,a[l+7],14,1735328473),d=f(d,j,k,c,a[l+12],20,-1926607734),c=g(c,d,j,k,a[l+5],4,-378558),k=g(k,c,d,j,a[l+8],11,-2022574463),j=g(j,k,c,d,a[l+11],16,1839030562),d=g(d,j,k,c,a[l+14],23,-35309556),c=g(c,d,j,k,a[l+1],4,-1530992060),k=g(k,c,d,j,a[l+4],11,1272893353),j=g(j,k,c,d,a[l+7],16,-155497632),d=g(d,j,k,c,a[l+10],23,-1094730640),c=g(c,d,j,k,a[l+13],4,681279174),k=g(k,c,d,j,a[l+0],11,-358537222),j=g(j,k,c,d,a[l+3],16,-722521979),d=g(d,j,k,c,a[l+6],23,76029189),c=g(c,d,j,k,a[l+9],4,-640364487),k=g(k,c,d,j,a[l+12],11,-421815835),j=g(j,k,c,d,a[l+15],16,530742520),d=g(d,j,k,c,a[l+2],23,-995338651),c=h(c,d,j,k,a[l+0],6,-198630844),k=h(k,c,d,j,a[l+7],10,1126891415),j=h(j,k,c,d,a[l+14],15,-1416354905),d=h(d,j,k,c,a[l+5],21,-57434055),c=h(c,d,j,k,a[l+12],6,1700485571),k=h(k,c,d,j,a[l+3],10,-1894986606),j=h(j,k,c,d,a[l+10],15,-1051523),d=h(d,j,k,c,a[l+1],21,-2054922799),c=h(c,d,j,k,a[l+8],6,1873313359),k=h(k,c,d,j,a[l+15],10,-30611744),j=h(j,k,c,d,a[l+6],15,-1560198380),d=h(d,j,k,c,a[l+13],21,1309151649),c=h(c,d,j,k,a[l+4],6,-145523070),k=h(k,c,d,j,a[l+11],10,-1120210379),j=h(j,k,c,d,a[l+2],15,718787259),d=h(d,j,k,c,a[l+9],21,-343485551),c=i(c,m),d=i(d,n),j=i(j,o),k=i(k,p)}return Array(c,d,j,k)}function d(a,b,c,d,e,f){return i(j(i(i(b,a),i(d,f)),e),c)}function e(a,b,c,e,f,g,h){return d(b&c|~b&e,a,b,f,g,h)}function f(a,b,c,e,f,g,h){return d(b&e|c&~e,a,b,f,g,h)}function g(a,b,c,e,f,g,h){return d(b^c^e,a,b,f,g,h)}function h(a,b,c,e,f,g,h){return d(c^(b|~e),a,b,f,g,h)}function i(a,b){var c=(65535&a)+(65535&b),d=(a>>16)+(b>>16)+(c>>16);return d<<16|65535&c}function j(a,b){return a<<b|a>>>32-b}function k(a){for(var b=Array(),c=(1<<n)-1,d=0;d<a.length*n;d+=n)b[d>>5]|=(a.charCodeAt(d/n)&c)<<d%32;return b}function l(a){for(var b=m?"0123456789ABCDEF":"0123456789abcdef",c="",d=0;d<4*a.length;d++)c+=b.charAt(a[d>>2]>>d%4*8+4&15)+b.charAt(a[d>>2]>>d%4*8&15);return c}var m=0,n=8;return b(a)};if(window.login_status="",window.logout_status="",window.renew_status="",window.PassportCardList=[],window.PassportSC={version:27,versionDetail:"New edition between 2013-08 to 2013-10 sohu passport team",appid:9999,max_line_length:30,domain:"",cookie:!1,email:"",bindDomainSelector:!0,autopad:"",autoRedirectUrl:"",loginRedirectUrl:"",logoutRedirectUrl:"",selectorTitle:"请选择您的用户账号类型",registerUrl:"https://passport.sohu.com/web/signup.jsp",recoverUrl:"https://passport.sohu.com/web/recover.jsp",postru:"",emailPostfix:!1,curDSindex:-1,usePost:1,successCalledFunc:!1,curCardIndex:0,loginSuccCallbackName:"loginSuccessCallFunction",loginFailCallbackName:"loginFailCallFunction",returnUrl:"",oElement:!1,rootElement:!1,dsElement:!1,sElement:!1,cElement:!1,dsAnchor:!1,emailInput:!1,passwdInput:!1,pcInput:!1,loginMsg:!1,iElement:!1,isSetFocus:!0,showEmailInit:!0,loginProtocol:"https:"===window.location.protocol?"https":"http",setCookieProtocol:"https:"===window.location.protocol?"https":"http",http_url:!1,loginUrl:"://passport.sohu.com/user/login",eInterval:!1,maxIntervalCount:100,intervalCount:0,state:"0000",postLoginClicked:!1,postLoginTimeout:!1,postLoginTimeoutTime:1e4,defualtRemPwd:"",isShowRemPwdMsg:0,campImg:"http://js.sohu.com/passport/images/pic007.gif",campImgAlt:"大本营",campUrl:"http://blog.sohu.com/camp?from=",cardTitle:"上搜狐，知天下",firstDomain:"",defaultApp:"",domainPool:["chinaren.com","sogou.com"],domainList:["sohu.com","uniqname","chinaren.com","sogou.com","vip.sohu.com","17173.com","focus.cn","game.sohu.com","37wanwan.com"],appList:{1051:"news_say",1017:"pp",1019:"blog",1073:"t",1074:"tv",1000:"mail",1001:"club",1062:"bai",1005:"alumni",10050:"chinaren",1038:"crclub",1039:"group",1021:"music",1010:"say",1042:"cbbs",1028:"focus",1029:"17173",1013:"vip",1035:"rpggame",1044:"pinyin",1022:"relaxgame"},appName:{news_say:"我来说两句",pp:"相册",blog:"博客",t:"微博",tv:"视频",mail:"邮件",club:"社区",bai:"白社会",alumni:"校友录",chinaren:"ChinaRen",crclub:"CR社区",group:"群组",music:"音乐盒",say:"说吧",cbbs:"校友论坛",focus:"焦点房产",17173:"游戏论坛",vip:"vip邮箱",rpggame:"RPG游戏",pinyin:"输入法",relaxgame:"休闲游戏"},appUrl:{news_say:"http://i.sohu.com/scomment/home/all/",pp:"http://pp.sohu.com/",blog:"http://blog.sohu.com/",t:"http://t.sohu.com",tv:"http://tv.sohu.com",mail:"http://mail.sohu.com/",club:"http://club.sohu.com",bai:"http://bai.sohu.com",alumni:"http://class.chinaren.com",chinaren:"",crclub:"http://club.chinaren.com",group:"http://i.chinaren.com/group",say:"http://s.sogou.com",music:"http://mbox.sogou.com/",cbbs:"http://cbbs.chinaren.com",focus:"http://www.focus.cn",17173:"http://bbs.17173.com",vip:"http://vip.sohu.com",rpggame:"http://game.sohu.com",pinyin:"http://pinyin.sogou.com",relaxgame:"http://game.sohu.com/index2.htm"},appPool:!1,bottomRow:[],recomServ:[],reverseFirstDomain:!1,showEmailInputTip:!0,usePostFix:!0,gotohref:function(a){var b;b=document.createElement("a"),b.setAttribute("href",a),document.body.appendChild(b),b.click()},getDomain:function(){return document.domain.split(".").slice(-2).join(".")},addCookie:function(a,b,c,d){""===this.domain&&(this.domain=this.getDomain());var e=a+"="+escape(b)+"; path=/; domain=."+(d?d:this.domain)+";";if(c>0){var f=new Date;f.setTime(f.getTime()+3600*c*1e3),e+="expires="+f.toGMTString()+";"}document.cookie=e},getCookie:function(a){if(!a)return"";for(var b=document.cookie.split("; "),c=0;c<b.length;c++)if(0===b[c].indexOf(a+"="))return b[c].substr(a.length+1);return""},deleteCookie:function(a){""===this.domain&&(this.domain=this.getDomain());var b=new Date;b.setTime(b.getTime()-1e5);var c=this.getCookie(a);document.cookie=a+"="+c+"; expires="+b.toGMTString()+"; path=/; domain=."+this.domain+";"},preventEvent:function(a){try{a.cancelBubble=!0,a.returnValue=!1,a.preventDefault&&a.preventDefault(),a.stopPropagation&&a.stopPropagation()}catch(b){}},getPosition:function(a,b){for(var c=0;a;)c+=a[b],a=a.offsetParent;return c},getTime:function(){return(new Date).getTime()},getHead:function(){return document.getElementsByTagName("head")[0]},getBody:function(){return document.getElementsByTagName("body")[0]},strip:function(a){return a.replace(/^\s+/,"").replace(/\s+$/,"")},reportMsg:function(a){var b="";switch(a.toString()){case"1":b="请输入通行证账号";break;case"2":b="通行证账号为邮件地址格式";break;case"3":b="账号后缀必须为"+arguments[1];break;case"4":b="请输入通行证密码";break;case"5":var c=this.strip(this.emailInput.value);b=c.lastIndexOf("@focus.cn")>0?"账号或密码错误!咨询电话:010-58511234":"账号或密码错误";break;case"6":b="登录超时，请稍后重试";break;case"7":b="登录失败，请重试";break;case"8":b="网络故障，退出失败，请重新退出";break;case"9":b="登录失败，请稍后重试";break;case"10":b="您登录过于频繁，请24小时后再试";break;case"11":b="检测到浏览器cookie被禁用，请启用cookie后重试";break;case"12":b="服务器故障，请稍后再试";break;case"13":b='账号已被锁定，请先到<a href="http://hudun.sohu.com/help/help9.html" target="blank">狐盾</a>解锁';break;case"14":b="动态密码错误，请重新输入";break;case"15":b="请输入动态密码";break;case"16":b="账号未激活，请先进入邮箱激活账号";break;case"17":b="账号已被锁定，请联系客服";break;case"18":b="验证码错误";break;case"19":b="用户IP已被限制";break;case"20":b="账号或密码错误";break;case"21":b="账号被狐盾锁定，请进入狐盾解锁！";break;default:b="登录错误，请稍后重试"}this.showMsg(b)},showMsg:function(a){this.loginMsg&&(this.loginMsg.innerHTML=a)},cookieHandle:function(){return this.cookie||this.parsePassportCookie(),this.cookie&&""!==this.cookie.userid?this.cookie.userid:""},getDisplayName:function(){var a=this.cookieHandle(),b=a.split("@")[0],c=/^1\d{10}$/;return c.test(b)?b.substring(0,3)+"****"+b.substring(7):a},parseLastDomain:function(a){this.emailPostfix=[];for(var b="",c="",d=[],e=document.cookie.split("; "),f=0;f<e.length;f++)if(0===e[f].indexOf("lastdomain=")){try{d=unescape(e[f].substr(11)).split("|")}catch(g){}break}var h=0,i="";if(d.length>=3){for(var j=Base64.decode(d[1]),k=j.split("|"),f=k.length-1;f>=0;f--)""!==k[f]&&(this.emailPostfix[h]=k[f],h++,i=k[f]);/^.*@.{1,}\.sohu\.com$/.test(i)&&(i=""),this.showEmailInit&&this.emailInput&&(this.emailInput.value=i)}if(""!==this.firstDomain){for(var l in a)if(this.firstDomain==a[l]){c=a[l];break}""!==c&&(this.emailPostfix[h]=c,h++)}document.domain.indexOf("game.sohu.com")>=0&&(b="game.sohu.com",this.emailPostfix[h]=b,h++),this.emailPostfix[h]=this.domain,h++;for(var m in a)"string"==typeof a[m]&&a[m]!=this.domain&&a[m]!=b&&a[m]!=c&&(this.emailPostfix[h]=a[m],h++)},drawPassport:function(element){if("object"==typeof element){if(0==PassportCardList.length&&(PassportCardList[0]=this),!this.successCalledFunc)try{this.successCalledFunc=eval("drawAppInfo")}catch(e){this.successCalledFunc=this.drawPassportInfo}if(this.init(element),!this.cookie||""==this.cookie.userid&&""==this.relationHandle())this.drawLoginForm();else{if(""!=this.autopad){var userid=""!=this.relationHandle()?this.relationHandle():this.cookie.userid,at=userid.lastIndexOf("@");if(at>0&&this.autopad.lastIndexOf(userid.substr(at+1))<0)return void this.drawLoginForm()}""!=this.autoRedirectUrl?PassportSC.gotohref(this.autoRedirectUrl):this.drawPassportCard()}}},init:function(a){this.rootElement=a;var b=null===this.selectorTitle||0===this.selectorTitle.length;this.rootElement.innerHTML='<div class="ppselecter" style="display: none;border:1px solid #B6D3FC; border-top:0 none;"><table width="100%" cellspacing="0" cellpadding="0" style="table-layout:fixed;"><tbody><tr>'+(b?"":'<td style="" class="ppseltit" id="ppseltitId">'+this.selectorTitle+"</td>")+"</tr><tr>"+(b?'<td height="0"></td>':'<td height="2"></td>')+'</tr><tr><td></td></tr></tbody></table></div><div style="display: none;"></div><div class="passportc"></div>',this.dsElement=this.rootElement.childNodes[0],this.sElement=this.rootElement.childNodes[1],this.cElement=this.rootElement.childNodes[2],this.dsAnchor=this.dsElement.firstChild.rows[2].firstChild,this.domain=this.getDomain(),this.parseLastDomain(this.domainList),this.parseAppid(),this.parsePassportCookie(),""==this.postru&&(this.postru=document.location.href)},parseAppid:function(){var a=this.appid.toString(),b=0;this.appPool=new Array;for(var c in this.appList){var d=this.appList[c];"string"==typeof d&&(c==a?this.defaultApp=this.appName[d]:("1028"==c?(this.appPool[b]={app:"focus",name:"北京业主论坛",url:"http://house.focus.cn/group/yezhu.php"},b++,this.appPool[b]={app:"focus",name:"装修论坛",url:"http://home.focus.cn/group/group_forum.php"}):this.appPool[b]={app:d,name:this.appName[d],url:this.appUrl[d]},b++))}},parsePassportCookie:function(){for(var a,b=document.cookie.split("; "),c=0;c<b.length;c++){if(0===b[c].indexOf("ppinf=")){a=b[c].substr(6);break}if(0===b[c].indexOf("ppinfo=")){a=b[c].substr(7);break}if(0===b[c].indexOf("passport=")){a=b[c].substr(9);break}}if("undefined"==typeof a)return void(this.cookie=!1);try{var d=unescape(a).split("|");if("1"==d[0]||"2"==d[0]){var e=Base64.decode(d[3]);return void this._parsePassportCookie(e)}}catch(f){}},_parsePassportCookie:function(a){var b=a.split("|");this.cookie={};for(var c,d,e,f=0,g=b.length;g>f;f++)0!==b[f].length&&(e=b[f].split(":"),3===e.length&&parseInt(e[1],10)===e[2].length&&(c=e[0],d=e[2],this.cookie[c]=d));relation_userid=this._parserRelation(),relation_userid&&(this.cookie[k]=relation_userid)},_parserRelation:function(){var a=this.cookie.relation;if(a)for(var b=a.split(";"),c=0;c<b.length;c++)for(var d=b[c].split(","),e=d[2].split("#"),f=0;f<e.length;f++)if(this.appid==e[f])return d[0];return""},doLogin:function(){var a=this.strip(this.emailInput.value),b=this.strip(this.passwdInput.value),c=1==this.pcInput.checked?1:0;if(""==a)return this.reportMsg("1"),this.emailInput.focus(),!1;if(""!=this.autopad){var d=a.substr(a.lastIndexOf("@")+1);if(this.autopad.lastIndexOf(d)<0)return this.reportMsg("3",this.autopad),this.emailInput.focus(),this.passwdInput.value="",!1}return""==b?(this.reportMsg("4"),this.passwdInput.value="",this.passwdInput.focus(),!1):1===this.usePost?this.postLoginClicked?!1:this.doPostLogin():this.eInterval?!1:(arguments[0]&&PassportCardList[index].doLogin(),login_status="",this.intervalCount=0,this.sElement.innerHTML="",this.loginHandle(a,b,c,this.sElement,this.loginFailCall.bindFunc(this),this.loginSuccessCall.bindFunc(this)))},doPostLogin:function(){var a=this;this.postLoginClicked=!0,this.postLoginTimeout=setTimeout(function(){a.postLoginClicked=!1,a.reportMsg("6")},this.postLoginTimeoutTime);for(var b,c=document.forms,d=0,e=c.length;e>d;d++)if("loginform"==c[d].name){b=c[d];break}if(!b)return document.location.href=this.loginProtocol+"://passport.sohu.com",!1;var f=getBrowserType(),g=screen.width,h=1==this.pcInput.checked?1:0,i="https:"==window.location.protocol?1:0;document.domain=this.getDomain();var j=this.getDomain();if(!document.getElementById("sohuPassportFrame")){var k;try{k=document.createElement('<iframe name="sohuPassportFrame"></iframe>')}catch(l){k=document.createElement("iframe"),k.name="sohuPassportFrame"}k.id="sohuPassportFrame",k.style.width="0px",k.style.height="0px",k.style.display="none",document.body.appendChild(k)}try{this.addHiddenInput(b,"appid",this.appid),this.addHiddenInput(b,"loginSuccessCallFunction","postLoginSuccessCall"),this.addHiddenInput(b,"loginFailCallFunction","postLoginFailCall"),this.addHiddenInput(b,"domain",j),this.addHiddenInput(b,"ru",this.postru),this.addHiddenInput(b,"b",f),this.addHiddenInput(b,"w",g),this.addHiddenInput(b,"v",this.version),this.addHiddenInput(b,"persistentcookie",h),this.addHiddenInput(b,"isSLogin",i)}catch(l){return!1}return b.target="sohuPassportFrame",b.method="post",b.action=this.loginProtocol+this.loginUrl,this.sendLog(document.getElementsByTagName("head")[0],"beginLogin","0"),!0},addHiddenInput:function(a,b,c){if("object"==typeof a||"form"===a.tagName.toLowerCase()){for(var d=document.getElementsByTagName("input",a),e=0,f=d.length;f>e;e++)if(b===d[e].getAttribute("name"))return void("persistentcookie"===b&&(d[e].value=c));var g=document.createElement("input");g.type="hidden",g.name=b,g.value=c,a.appendChild(g)}},loginHandle:function(a,b,c,d,e,f){if("object"!=typeof d)return!1;if(!checkCookieEnabled())return e(),!1;login_status="";var g=getBrowserType(),h=screen.width;""==this.domain&&(this.domain=this.getDomain());var i=this.getTime(),j=MD5(b),k=this.getTime(),l="";document.getElementById("stoken")&&(l=PassportSC.strip(document.getElementById("stoken").value)),this.http_url=("https"==this.loginProtocol&&i>MIN_HTTS_TIMESTAMP?"https":"http")+"://passport.sohu.com/act/login?userid="+("function"==typeof encodeURIComponent?encodeURIComponent(a):a)+"&password="+j+"&appid="+this.appid+"&persistentcookie="+c+("https"==this.loginProtocol&&i>MIN_HTTS_TIMESTAMP?"&isSLogin=1":"")+"&s="+i+"&b="+g+"&w="+h+"&pwdtype=1&v="+this.version+"&t="+k+"&stoken="+l+("sohu.com"!=this.domain?"&domain="+this.domain:""),this.state="https"==this.loginProtocol?"1100":"2200",this.sendLog(d,"beginLogin","0");var m=document.createElement("script");m.src=this.http_url,m.id="loginele",d.appendChild(m);var n=this;return this.eInterval=setInterval(function(){n.loginIntervalProc(e,f,d)},100),!1},loginIntervalProc:function(a,b,c){if(""==login_status&&this.intervalCount<this.maxIntervalCount)return void this.intervalCount++;if(clearInterval(this.eInterval),this.eInterval=!1,""==login_status&&this.intervalCount>=this.maxIntervalCount){var d="";"2200"==this.state?(d="1",this.state="2210"):"1200"==this.state&&(this.state="1210",d="3"),this.sendLog(c,"login timeout"+this.state,d)}if("success"==login_status&&(this.addCookie("pp_login_time",this.loginProtocol+"|"+this.email+"|"+this.appid+"|"+getBrowserType()+"|"+this.intervalCount+"|"+this.state,-1,"sohu.com"),"1200"==this.state&&this.sendLog(c,"login success","2")),"success"!=login_status||this.intervalCount>=this.maxIntervalCount)if("https"==this.loginProtocol&&""==login_status){this.intervalCount=0,this.loginProtocol="http",this.state="1200","s"==this.http_url.charAt(4)&&(this.http_url="http"+this.http_url.substr(5)),"sohu.com"!=this.domain&&(this.http_url+="&domain="+this.domain);var e=document.createElement("script");e.src=this.http_url,c.appendChild(e);var f=this;this.eInterval=setInterval(function(){f.loginIntervalProc(a,b,c)},100)}else a();else""==this.loginRedirectUrl?this.autoProcAllDomain("login",c):this.addCookie("crossdomain",this.getTime(),336),b()},loginFailCall:function(){if(this.sElement.innerHTML="",this.drawLoginForm(),this.intervalCount>=this.maxIntervalCount)this.reportMsg("6"),this.emailInput.focus();else if("error3"==login_status||"error2"==login_status)this.reportMsg("5"),this.passwdInput.focus();else if("error5"==login_status)this.reportMsg("10"),this.passwdInput.focus();else{if("error13"==login_status)return void(window.location=this.loginProtocol+"://passport.sohu.com/web/remind_activate.jsp");"error11"==login_status?(this.reportMsg("12"),this.passwdInput.focus()):"error8"==login_status?(this.reportMsg("13"),this.passwdInput.focus()):"error9"==login_status?this.reportMsg("14"):checkCookieEnabled()?(this.reportMsg("9"),this.passwdInput.focus()):(this.reportMsg("11"),this.emailInput.focus())}},loginSuccessCall:function(){this.parsePassportCookie(),this.cookie&&""!=this.cookie.userid?(this.email="",""!=this.loginRedirectUrl?this.gotohref(this.loginRedirectUrl):this.drawPassportCard()):(this.drawLoginForm(),this.reportMsg("7"))},postLoginSuccessCall:function(){this.postLoginTimeout&&(clearTimeout(this.postLoginTimeout),this.postLoginTimeout=!1),this.postLoginClicked=!1,this.loginSuccessCallFunction()},postLoginFailCall:function(){this.postLoginTimeout&&(clearTimeout(this.postLoginTimeout),this.postLoginTimeout=!1),this.postLoginClicked=!1,this.loginFailCallFunction(arguments[0])},loginSuccessCallFunction:function(){},loginFailCallFunction:function(){},drawPassportCard:function(){this._drawPassportCard();var a=document.getElementById("ppcontid");a.onclick=this.doClickLink.bindFunc(this),this.initiElement();try{if(null!=this.iElement)this.successCalledFunc(this.iElement);else try{this.drawPassportInfo()}catch(b){}}catch(b){this.drawPassportInfo()}},_drawPassportCard:function(){},doClickLink:function(a){var b=window.event?window.event:a,c=b.srcElement||b.target,d=c.tagName.toLowerCase(),e=this.cookie.userid,f=document.location.href;if("img"==d&&(d=c.parentNode.tagName.toLowerCase(),c=c.parentNode),"a"==d){var g=document.createElement("script");g.src=this.loginProtocol+"://passport.sohu.com/web/golog.jsp?userid="+e+"&fappid="+this.appid+"&furl="+f+"&turl="+c,this.iElement.appendChild(g)}},initiElement:function(){this.iElement=document.getElementsByClassName("listContA")[0]},drawPassportWait:function(){},drawPassportInfo:function(){},loginSuccessCallback:function(){},loginFailCallback:function(){},doLogout:function(){this.eInterval||(this.intervalCount=0,this.sElement.innerHTML="",this.logoutHandle(this.sElement,this.logoutFailCall.bindFunc(this),this.logoutSuccessCall.bindFunc(this,"dd")))},logoutHandle:function(a,b,c){if("object"!=typeof a)return!1;logout_status="",""==this.domain&&(this.domain=this.getDomain());var d=this.getTime(),e=this.loginProtocol+"://passport.sohu.com/act/logout?s="+d+"&appid="+this.appid;"sohu.com"!=this.domain&&(e+="&domain="+this.domain);var f=document.createElement("script");f.src=e,a.appendChild(f);var g=this;this.eInterval=setInterval(function(){g.logoutIntervalProc(b,c,a)},100)},logoutIntervalProc:function(a,b,c){if(""==logout_status&&this.intervalCount<this.maxIntervalCount)return void this.intervalCount++;if(clearInterval(this.eInterval),this.eInterval=!1,""==logout_status&&this.intervalCount>=this.maxIntervalCount){a();var d=document.createElement("script"),e=getBrowserType();return d.src=this.loginProtocol+"://passport.sohu.com/web/cardlog.jsp?desc=logout timeout&loginProtocol="+this.loginProtocol+"&userid="+this.email+"&appid="+this.appid+"&browserType="+e,void c.appendChild(d)}return"success"!=logout_status?void a():(""==this.logoutRedirectUrl?this.autoProcAllDomain("logout",c):this.addCookie("crossdomain_logout",this.getTime(),336),void b())},logoutFailCall:function(){this.sElement.innerHTML="",this.reportMsg("8")},logoutSuccessCall:function(){this.parseLastDomain(this.domainList),this.cookie=!1,this.drawLoginForm();for(var a=0;a<PassportCardList.length;a++)a!=this.curCardIndex&&PassportCardList[a].drawLoginForm();try{logoutApp()}catch(b){}},renewCookie:function(a,b,c){if("object"!=typeof a)return!1;""==this.domain&&(this.domain=this.getDomain());var d=this.getTime(),e=this.loginProtocol+"://passport.sohu.com/sso/renew.jsp?s="+d;"sohu.com"!=this.domain&&(e+="&domain="+this.domain);var f=document.createElement("script");f.src=e,a.appendChild(f);var g=this;return this.eInterval=setInterval(function(){g.renewIntervalProc(b,c,a)},100),!1},renewIntervalProc:function(a,b,c){if(""==renew_status&&this.intervalCount<this.maxIntervalCount)return void this.intervalCount++;if(clearInterval(this.eInterval),this.eInterval=!1,"success"!=renew_status||this.intervalCount>=this.maxIntervalCount)try{a()}catch(d){}else{this.autoProcAllDomain("renew",c);try{b()}catch(d){}}},getRanServ:function(){var a=this.recomServ.length;if(0==a)return"";var b=Math.floor(a*Math.random()),c='<a href="'+this.recomServ[b].url+'" target="_blank">'+this.recomServ[b].name+"</a>";if(1==a)return c;for(var d=Math.floor(a*Math.random());b==d;)d=Math.floor(a*Math.random());return c+=' | <a href="'+this.recomServ[d].url+'" target="_blank">'+this.recomServ[d].name+"</a>"},_drawLoginForm:function(){},drawLoginForm:function(){this._drawLoginForm();for(var a=this.cElement.getElementsByTagName("input"),b=0;b<a.length;b++)"email"==a[b].name&&(this.emailInput=a[b]),"password"==a[b].name&&(this.passwdInput=a[b]),"persistentcookie"==a[b].name&&(this.pcInput=a[b]);if(this.loginMsg=document.getElementsByClassName("error")[0],1==this.isShowRemPwdMsg){var c=this;this.pcInput.onclick=function(){if(0!=c.pcInput.checked){var a=window.confirm("浏览器将在两周内保持通行证的登录状态，网吧或公共机房上网者请慎用。您能确认本次操作吗？");0==a&&(c.pcInput.checked=!1)}}}this.bindSelector(),this.autoFillUserId();var c=this;""==this.emailInput.value?this.isSetFocus&&setTimeout(function(){c.emailInput.focus()},50):this.isSetFocus&&"通行证账号/手机号"!=this.emailInput.value&&setTimeout(function(){c.passwdInput.focus()},50)},autoProcAllDomain:function(a,b){var c=this.crossDomainIframeUrl(a);if(c){var d=document.createElement("iframe");d.src=c,d.style.width="0",d.style.height="0",b.appendChild(d)}},doCrossDomainCookie:function(a,b){if("object"==typeof a){var c="crossdomain";"logout"==b&&(c="crossdomain_logout");var d=this.getCookie(c);if(""!=d&&"0"!=d){""==this.domain&&(this.domain=this.getDomain());var e=this.crossDomainIframeUrl(b);if(e){var f=document.createElement("iframe");f.src=e,f.style.width="0",f.style.height="0",f.style.display="none",a.appendChild(f),this.deleteCookie(c)}}}},crossDomainUrl:function(a,b){var c=this.getTime(),d=this.setCookieProtocol+"://passport.sohu.com/sso/crossdomain.jsp?s="+c+"&action="+a+"&domain="+b;return d},crossDomainIframeUrl:function(a){var b=this.setCookieProtocol+"://"+this.getPassportDomain()+"/sso/crossdomain_all.jsp?action="+a;return b},getPassportDomain:function(){""===this.domain&&(this.domain=this.getDomain());var a="passport."+this.domain;return this.domain in{"focus.cn":"","17173.com":"","37wanwan.com":"","51f.com":""}&&(a="pass."+this.domain),a},setDomainCookie:function(a,b,c,d){login_status="",crossdomain_status="";var e=this.crossDomainUrl("login",b);e&&(newScript=document.createElement("script"),newScript.src=e,a.appendChild(newScript));var f=this;this.eInterval=setInterval(function(){f.setCookieIntervalProc(a,c,d)},100)},setCookieIntervalProc:function(a,b,c){return""!=crossdomain_status?(clearInterval(this.eInterval),this.eInterval=!1,void c()):""==login_status&&this.intervalCount<this.maxIntervalCount?void this.intervalCount++:(clearInterval(this.eInterval),this.eInterval=!1,"success"!=login_status||this.intervalCount>=this.maxIntervalCount?void c():void b())},autoFillUserId:function(){if(this.showEmailInputTip)return void(this.showEmailInputTip=!1);var a=this.getCookie("pptmpuserid");if(this.emailInput.value=this.email.length>0?this.email:a,a.length>0){var b=this;setTimeout(function(){b.deleteCookie("pptmpuserid")},1e3)}},downDSindex:function(){if(null!=this.dsAnchor.firstChild){for(var a=this.dsAnchor.firstChild.rows,b=0;b<a.length&&a[b].firstChild.idx!=this.curDSindex;b++);this.curDSindex=b>=a.length-1?a[0].firstChild.idx:a[b+1].firstChild.idx}},upDSindex:function(){if(null!=this.dsAnchor.firstChild){for(var a=this.dsAnchor.firstChild.rows,b=-1,c=0;c<a.length&&a[c].firstChild.idx!=this.curDSindex;c++)b=a[c].firstChild.idx;this.curDSindex=c==a.length?a[0].firstChild.idx:-1==b?a[a.length-1].firstChild.idx:b}},findDSindex:function(a){try{for(var b=this.dsAnchor.firstChild.rows,c=0;c<b.length;c++)if(b[c].firstChild.idx==a)return b[c].firstChild}catch(d){}return!1},clearFocus:function(a){"number"!=typeof a&&(a=this.curDSindex);try{var b=this.findDSindex(a);b.className="",b.style.fontWeight="normal"}catch(c){}},setFocus:function(a){"number"!=typeof a&&(a=this.curDSindex);try{var b=this.findDSindex(a);b.className="active"}catch(c){}},fillEmailSelect:function(){var a=this.emailInput.value,b=/^[\u4e00-\u9fa5,a-zA-Z0-9-_.@]{1,100}$/;if(""==a||!b.test(a))return this.dsElement.style.display="none",void(this.curDSindex=-1);var c="",d="",e=a.lastIndexOf("@");0>e?d=a:e==a.length-1?d=a.substr(0,e):(d=a.substr(0,e),c=a.substr(e+1));var f=this.getPosition(this.emailInput,"offsetLeft")-this.getPosition(this.cElement,"offsetLeft");document.all&&!document.addEventListener&&(f+=1),this.dsElement.style.zIndex="2000",this.dsElement.style.paddingRight="0",this.dsElement.style.paddingLeft="0",this.dsElement.style.paddingTop="0",this.dsElement.style.paddingBottom="0",this.dsElement.style.backgroundColor="white",this.dsElement.style.display="block";var g=document.createElement("TABLE");g.width="100%",g.style.tableLayout="fixed",g.cellSpacing=0,g.cellPadding=3;var h=document.createElement("TBODY");g.appendChild(h);var i=0,j=!1,k=!1,l=-1,m="",n="",o=this.emailPostfix,p=/^1\d{0,10}$/,q=/^\d*$/;q.test(a)&&(o=""===this.autopad?["qq.com","focus.cn"]:["qq.com","focus.cn",this.autopad]),p.test(a)&&(o=""===this.autopad?["mobile","qq.com","focus.cn"]:["mobile","qq.com","focus.cn",this.autopad]);for(var r=0;r<o.length;r++){var s=o[r];if("string"==typeof s&&0!=s.length&&(""==c||0==s.lastIndexOf(c))){if(s.lastIndexOf("@")>=0){if(tmp_pos=s.lastIndexOf("@"),""!=this.autopad&&this.autopad.lastIndexOf(s.substring(tmp_pos+1))<0)continue;if(n=s.substring(0,tmp_pos),0!=n.indexOf(d))continue;n==d&&(m=s.substring(s.lastIndexOf("@")+1)),k=!0}else if(""!=this.autopad&&this.autopad.lastIndexOf(s)<0)continue;if(s!=m){var t=s.split("@").slice(-1).toString(),u=t.match(/[^\x00-\xff]/gi);if(null==u||0==u.length){i++,-1==l&&(l=r),this.curDSindex==r&&(j=!0);var v=document.createElement("TR"),w=document.createElement("TD");w.nowrap="true",w.align="left",w.innerHTML="mobile"==s||"uniqname"==s?d:0==k?this.usePostFix?d+"@"+s:d:this.usePostFix?s:s.substring(0,s.lastIndexOf("@")),w.title=w.innerHTML,w.style.width="166px",w.style.lineHeight="1.6em",w.style.textOverflow="ellipsis",w.style.whiteSpace="nowrap",w.style.overflow="hidden",w.id="email_postfix_"+r,w.idx=r;var x=this;w.onmouseover=function(){x.clearFocus(),x.curDSindex=this.idx,x.setFocus(),this.style.cursor="pointer"
},w.onclick=function(){x.doSelect()},v.appendChild(w),h.appendChild(v),k=!1}}}}i>0?(this.dsAnchor.innerHTML="",this.dsAnchor.appendChild(g),0==j&&(this.curDSindex=l),this.setFocus()):(this.dsElement.style.display="none",this.curDSindex=-1)},doSelect:function(){var a=this.findDSindex(this.curDSindex);if(a){var b=a.innerHTML;b&&(this.emailInput.value=b.replace(/&amp;/g,"&"))}""!=this.emailInput.value&&this.passwdInput.focus(),this.dsElement.style.display="none"},blurUserid:function(){var a=this;setTimeout(function(){a.dsElement&&"none"!=a.dsElement.style.display&&(a.dsElement.style.display="none")},150)},checkKeyDown:function(a){a=a||window.event;var b=a.keyCode||a.which||a.charCode;if(38==b||40==b){if(1==a.shiftKey)return;this.clearFocus(),38==b?this.upDSindex():40==b&&this.downDSindex(),this.setFocus()}},checkKeyPress:function(a){a=a||window.event;var b=a.keyCode||a.which||a.charCode;if(13==b)this.preventEvent(a);else if(38==b||40==b){if(1==a.shiftKey)return;this.preventEvent(a),this.clearFocus(),38==b?this.upDSindex():40==b&&this.downDSindex(),this.setFocus()}else if(108==b||110==b||111==b||115==b){var c=this;setTimeout(function(){c.fillEmailSelect()},10)}},checkKeyUp:function(a){a=a||window.event;var b=a.keyCode||a.which||a.charCode;if(this.fillEmailSelect(),13==b&&this.doSelect(),!(7!=getBrowserType()&&4!=getBrowserType()||38!=b&&40!=b)){if(1==a.shiftKey)return;this.clearFocus(),38==b?this.upDSindex():40==b&&this.downDSindex(),this.setFocus()}},bindSelector:function(){if(this.bindDomainSelector&&(this.curDSindex=-1,"undefined"!=typeof this.emailInput))try{this.emailInput.addEventListener("keypress",this.checkKeyPress.bindFunc(this),!1),this.emailInput.addEventListener("keyup",this.checkKeyUp.bindFunc(this),!1),this.emailInput.addEventListener("blur",this.blurUserid.bindFunc(this),!1)}catch(a){try{this.emailInput.attachEvent("onkeydown",this.checkKeyDown.bindFunc(this)),this.emailInput.attachEvent("onkeypress",this.checkKeyPress.bindFunc(this)),this.emailInput.attachEvent("onkeyup",this.checkKeyUp.bindFunc(this)),this.emailInput.attachEvent("onblur",this.blurUserid.bindFunc(this))}catch(a){}}},drawPassportNew:function(a,b,c){if("object"==typeof a){var d=new Function;d.prototype=this;var e=PassportCardList.length,f=new d;f.successCalledFunc=c,f.appid=b,f.curCardIndex=e,f.isSetFocus=!1,PassportCardList[e]=f,drawPassportNewInit(e,a)}},drawPassportJS:function(){if(this.oElement&&"object"==typeof this.oElement){var a=this.getCookie("ppinf"),b="http://sso.passport.sohu.com/mirror/"+this.getPassportDomain()+"/"+a,c=document.createElement("script");c.src=b,ele.appendChild(c)}},doCrossDomainIframe:function(a){var b=document.createElement("iframe");b.src=a,b.style.width="0",b.style.height="0",b.id="ifr_crossdomain",PassportSC.oElement.appendChild(b)},sendLog:function(a,b,c){var d=document.createElement("script"),e=getBrowserType();d.src="//passport.sohu.com/web/cardlog.jsp?desc="+b+"&loginProtocol="+this.loginProtocol+"&userid="+this.email+"&appid="+this.appid+"&browserType="+e+"&status="+login_status+"&count="+this.intervalCount+"&max="+this.maxIntervalCount+"&flag="+c,a.appendChild(d)}},"undefined"==typeof PP_SETCROSSDOMAIN){var ele=document.getElementsByTagName("head")[0];"undefined"!=typeof PP_SETCOOKIEPROTOCOL&&(PassportSC.setCookieProtocol=PP_SETCOOKIEPROTOCOL),PassportSC.doCrossDomainCookie(ele,"login"),PassportSC.doCrossDomainCookie(ele,"logout")}"undefined"==typeof encodeURIComponent&&(PassportSC.usePost=1),3==getBrowserType()&&(5e3==screen.height||window.navigator.userAgent.lastIndexOf("Mini")>=0)&&(PassportSC.usePost=1),window.svp=window.svp||{},window.svp.PassportSC=window.PassportSC,window.svp._MD5=MD5,window.svp._Base64=Base64,"function"==typeof window.svp.define&&svp.define("PassportSC",function(a,b,c){c.exports=window.svp.PassportSC})}(window);